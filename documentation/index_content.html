<section>
    <div>
        <h1>Codeface Documentation</h1>
        
        <p>
        ‚ö†Ô∏è <i>This page is still new and continuously growing. Latest update: June 28, 2023</i>
        </p>
        
        <h2>General Questions</h2>
        
        <h3>üìï What If I Don't Want to Read an FAQ?</h3>
        <p>
        You can always write at <a href="mailto:hello@codeface.io">hello@codeface.io</a> to get personal support.
        </p>
        
        <h3>üìï What Does Codeface Do Exactly?</h3>
        <p>
        Have a look at <a href="../blog/posts/visualizing-sourcekit-lsp-in-codeface/index.html">this showcase</a>.
        </p>
        
        <h3>üìï How Can I Try It Out Quickly?</h3>
        <p>
        Install Codeface <a href="https://apps.apple.com/app/codeface/id1578175415" target="_blank">from the Mac App Store</a>. Then download and open <a href="../blog/posts/try-codeface-with-codebase-files-to-download/index.html">one of theses files</a>.
        </p>
        
        <h2>Language Support Via LSP and LSPService</h2>
        
        <h3>üìï Why Do I Not See Any Arrows?</h3>
        <p>
        To see dependency arrows and symbols, Codeface must talk to LSPService while importing a code folder. LSPService is a free open-source webservice that you can download and run on your machine. It can launch LSP servers and thereby provide Codeface detailed information about codebases of virtually all languages.
        </p>
        
        <p>
        <a href="../blog/posts/using-lsp-servers-in-codeface-via-lspservice/index.html">This tutorial</a> describes how to setup and use LSPService.
        </p>
        
        <p>
        Note that automatic Swift support only works for Swift packages, since <a href="https://github.com/apple/sourcekit-lsp" target="_blank">Apple's LSP server</a> does not support Xcode projects.
        </p>

        <p>
        In following sections, you find more infos on support for <a href="#swift">Swift (Apple platforms)</a>, <a href="#dart">Dart (Flutter)</a> and <a href="#kotlin">Kotlin (Android and KMP)</a>.
        </p>
        
        <h3>üìï How Does LSPService Work?</h3>
        <p>
        Have a look at <a href="../blog/posts/using-lsp-servers-in-codeface-via-lspservice/index.html">this tutorial</a>.
        </p>
        
        <h3>üìï Why Do I Even Need LSPService? That's Cumbersome!</h3>
        <p>
        And indeed it is more cumbersome than we would have liked. Because of the App Store rules, it took a lot of work to make Codeface available in the App Store at all without losing its ability to leverage LSP servers. Another recent attempt to replace LSPService by an integrated XPC service also failed.
        </p>
        <p>
        However, we're working on making LSP server integration easier on multiple fronts. For example, 1) LSPService will be signed, so its installation becomes smoother and 2) You'll be able to configure LSPService via a graphical interface from within Codeface. Because of these efforts, significant new features are currently all on hold.
        </p>
        
        <h3>üìï Why Does The Code Import Take So Long?</h3>
        <p>
        When using an LSP server, importing larger codebases does indeed take long because requests to LSP servers <a href="https://forums.swift.org/t/sourcekitservice-only-using-50-of-cpu/53747" target="_blank">can not generally be made in parallel</a>.
        </p>
        <p>
        You can accelerate loading a codebase visualization again by saving it to a .codebase file. Such a file stores a whole codebase, including all the data retrieved from an LSP server. Loading a codebase from file is much faster. So when you don't need to update the visualization, you can open it in Codeface without waiting for the LSP server.
        </p>
        
        <h2 id="swift">Language Support For Swift (Apple Platforms)</h2>

        <h3>üìï How Do I Setup the Swift LSP Server?</h3>

        <p>
        If Xcode is installed, LSPService automatically finds <a href="https://github.com/apple/sourcekit-lsp" target="_blank">Apple's LSP server (SourceKit-LSP)</a>, which supports Swift code. Using it with Swift code, you have to be aware of a few things:

        <ul>
            <li>SourceKit-LSP supports Swift Packages but not Xcode projects.</li>
            <li>To update what SourceKit-LSP can "see", you have to <code>`swift build`</code> the package from the terminal before importing it into a Codeface file. This is due to a <a href="https://github.com/apple/sourcekit-lsp#caveats">caveat</a> of SourceKit-LSP, which is still at an early stage.</li>
            <li>Sometimes, deleting the hidden ".build" folder within the package before building it helps to update everything. You can show and hide hidden files on macOS via shift + ‚åò + . (Shift + Command + Dot).</li>
        </ul>
        </p>

        <p>
        The same LSP server from Apple should also work for Objective-c, C++ and C.
        </p>
        
        <h3>üìï Why Can I Not Visualize My Xcode Project?</h3>
        <p>
        Codeface can import any code folder. But it can <b>not</b> open, import or otherwise know anything about Xcode projects. This is because <a href="https://github.com/apple/sourcekit-lsp" target="_blank">Apple's LSP server</a> does not support Xcode projects but only <a href="https://www.swift.org/package-manager" target="_blank">Swift packages</a>.
        </p>
        
        <p>
        We suspect that <a href="https://github.com/apple/sourcekit-lsp" target="_blank">Apple's LSP server</a> will never support Xcode projects but that instead the <a href="https://www.swift.org/package-manager" target="_blank">Swift Package Manager</a> might some day support app targets and thereby¬†more or less replace Xcode project files.
        </p>
        
        <p>
        If your code is in an Xcode project, you can use a little "trick" to visualize it: Extract as much of it as possible into one or multiple <a href="https://developer.apple.com/documentation/xcode/organizing-your-code-with-local-packages" target="_blank">local Swift packages</a>. Many developers do that anyway to speed up compiles and to manifest/enforce architectural boundaries.
        </p>
        
        <h3>üìï Why Is My Swift Package Not Visualized Correctly?</h3>
        <p>
        As described above, you have to <code>`swift build`</code> the package from the terminal before importing it into a .codebase file. This will update what <a href="https://github.com/apple/sourcekit-lsp" target="_blank">Apple's LSP server</a> can "see" during the import.
        </p>
        <p>
        Sometimes, it's also necessary to delete the hidden ".build" folder inside the package folder before building the package. You can show and hide hidden files on macOS via shift + ‚åò + . (Shift + Command + Dot).
        </p>

        <h2 id="dart">Language Support for Dart (Flutter)</h2>

        <h3>üìï How Do I Setup the Dart LSP Server?</h3>
        
        <p>
        Dart includes an <a href="https://github.com/dart-lang/sdk/tree/main/pkg/analysis_server/tool/lsp_spec" target="_blank">official Dart language server</a>. When Dart is installed (possibly as part of Flutter), you should be able to launch its language server via <code>`dart language-server`</code>. It seems the client id and -version arguments are not required.
        </p>

        <p>
        When adding an entry for Dart into the LSPServiceConfig.json file, you need to provide the full path to Dart. You can determine that path via the shell command <code>`which dart`</code>. The entry may then look something like this:
        </p>

<pre><code>
"dart" : {
    "path" : "/Users/seb/Desktop/flutter/bin/dart",
    "arguments" : [
        "language-server"
    ],
    "environment" : {}
}</code>
</pre>

    <p>
    As with most languages, it is important to build a Dart-/Flutter project before importing it into Codeface.
    </p>

    <h2 id="kotlin">Language Support For Kotlin (Android and <a href="https://kotlinlang.org/docs/multiplatform.html" target="_blank">KMP</a>)</h2>

    <h3>üìï How Do I Setup the Kotlin LSP Server?</h3>

    <p>
    Install the <a href="https://github.com/fwcd/kotlin-language-server" target="_blank">Kotlin Language Server (KLS)</a> via Homebrew: <code>`brew install kotlin-language-server`</code>
    </p>

    <p>
    The default LSPServiceConfig.json file (generated by LSPService when the file doesn't exist) already contains the path of KLS, given that KLS was installed via Homebrew. The entry should look something like this:
    </p>

<pre><code>
"kotlin" : {
    "path" : "/opt/homebrew/bin/kotlin-language-server",
    "arguments" : [

    ],
    "environment" : {

    }
}</code>
</pre>

    <p>
    As with most languages, it is important to build a Kotlin project before importing it into Codeface.
    </p>

</section>
